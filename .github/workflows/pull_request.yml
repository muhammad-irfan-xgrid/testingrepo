name: Lint Code Base
permissions: {}

# Trigger the workflow only on pull requests targeting the main branch
on:
  pull_request:
    branches:
      - main

jobs:
  build:
    name: Lint Code Base
    runs-on: ubuntu-latest

    # Permissions required for the job
    permissions:
      contents: read  # Allows reading repository contents
      statuses: write # Allows posting status updates

    steps:
      # Step to check out the code from the repository
      - name: Checkout Code
        uses: actions/checkout@v4
        with:
          # Fetch the full git history for accurate linting
          fetch-depth: 0

      # Step to run Super-Linter
      - name: Lint Code Base
        uses: super-linter/super-linter/slim@v7
        env:
          # The default branch to compare against (for pull request reviews)
          DEFAULT_BRANCH: main
          
          # Whether to disable error reporting
          DISABLE_ERRORS: false

          # GitHub token for accessing repository contents
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

          # Disable linting all code types by default
          VALIDATE_ALL_CODEBASE: false
          
          # Enable specific linters
          VALIDATE_TERRAFORM: true  # Lint Terraform configurations
          VALIDATE_HADOLINT: true   # Lint Dockerfiles (if applicable)
          VALIDATE_CLOUDFORMATION: true  # Lint AWS CloudFormation templates (if applicable)

          # Disable unnecessary linters
          VALIDATE_JSON: false  # Disable JSON linting
          VALIDATE_YAML: false  # Disable YAML linting
          VALIDATE_MARKDOWN: false  # Disable Markdown linting
          VALIDATE_JSCPD: false  # Disable duplicate code detection
          VALIDATE_NATURAL_LANGUAGE: false  # Disable natural language linting
          VALIDATE_TERRAFORM_TERRASCAN: false  # Disable Terrascan for Terraform
          VALIDATE_CHECKOV: false  # Disable Checkov for Terraform security scanning
